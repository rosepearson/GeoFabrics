<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geofabrics.processor &mdash; Geofabrics 0.7.6 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=918ced64"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="geofabrics.runner" href="../runner/index.html" />
    <link rel="prev" title="geofabrics.geometry" href="../geometry/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Geofabrics
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../benchmarking/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">benchmarking</span></code></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics</span></code></a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../__main__/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.__main__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../bathymetry_estimation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.bathymetry_estimation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../dem/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.dem</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../geometry/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.geometry</span></code></a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.processor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../runner/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.runner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../version/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.version</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Geofabrics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics</span></code></a></li>
      <li class="breadcrumb-item active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.processor</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/autoapi/geofabrics/processor/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-geofabrics.processor">
<span id="geofabrics-processor"></span><h1><a class="reference internal" href="#module-geofabrics.processor" title="geofabrics.processor"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.processor</span></code></a><a class="headerlink" href="#module-geofabrics.processor" title="Link to this heading"></a></h1>
<p>This module contains classes associated with generating GeoFabric layers from
LiDAR and bathymetry contours based on the instructions contained in a JSON file.</p>
<p>GeoFabric layers include hydrologically conditioned DEMs.</p>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading"></a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h3>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p></td>
<td><p>An abstract class with general methods for accessing elements in</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#geofabrics.processor.RawLidarDemGenerator" title="geofabrics.processor.RawLidarDemGenerator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RawLidarDemGenerator</span></code></a></p></td>
<td><p>RawLidarDemGenerator executes a pipeline for creating a DEM from LiDAR and</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#geofabrics.processor.HydrologicDemGenerator" title="geofabrics.processor.HydrologicDemGenerator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HydrologicDemGenerator</span></code></a></p></td>
<td><p>HydrologicDemGenerator executes a pipeline for loading in a raw DEM and extents</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#geofabrics.processor.RoughnessLengthGenerator" title="geofabrics.processor.RoughnessLengthGenerator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RoughnessLengthGenerator</span></code></a></p></td>
<td><p>RoughnessLengthGenerator executes a pipeline for loading in a hydrologically</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#geofabrics.processor.MeasuredRiverGenerator" title="geofabrics.processor.MeasuredRiverGenerator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MeasuredRiverGenerator</span></code></a></p></td>
<td><p>MeasuredRiverGenerator executes a pipeline to interpolate between</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#geofabrics.processor.RiverBathymetryGenerator" title="geofabrics.processor.RiverBathymetryGenerator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RiverBathymetryGenerator</span></code></a></p></td>
<td><p>RiverbathymetryGenerator executes a pipeline to estimate river</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#geofabrics.processor.WaterwayBedElevationEstimator" title="geofabrics.processor.WaterwayBedElevationEstimator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WaterwayBedElevationEstimator</span></code></a></p></td>
<td><p>WaterwayBedElevationGenerator executes a pipeline to pull in OpenStreetMap waterway</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">BaseProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>An abstract class with general methods for accessing elements in
instruction files including populating default values. Also contains
functions for downloading remote data using geopais, and constructing data
file lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>json_instructions</strong> (<em>json</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.create_metadata">
<span class="sig-name descname"><span class="pre">create_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.create_metadata" title="Link to this definition"></a></dt>
<dd><p>A clase to create metadata to be added as netCDF attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_instruction_path">
<span class="sig-name descname"><span class="pre">get_instruction_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_instruction_path" title="Link to this definition"></a></dt>
<dd><p>Return the file path from the instruction file, or default if there
is a default value and the local cache is specified. Raise an error if
the key is not in the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – </p></li>
<li><p><strong>defaults</strong> (<em>dict</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pathlib.Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.check_instruction_path">
<span class="sig-name descname"><span class="pre">check_instruction_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.check_instruction_path" title="Link to this definition"></a></dt>
<dd><p>Return True if the file path exists in the instruction file, or True
if there is a default value and the local cache is specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.create_results_folder">
<span class="sig-name descname"><span class="pre">create_results_folder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.create_results_folder" title="Link to this definition"></a></dt>
<dd><p>Ensure the results folder has been created.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_resolution">
<span class="sig-name descname"><span class="pre">get_resolution</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_resolution" title="Link to this definition"></a></dt>
<dd><p>Return the resolution from the instruction file. Raise an error if
not in the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_crs">
<span class="sig-name descname"><span class="pre">get_crs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_crs" title="Link to this definition"></a></dt>
<dd><p>Return the CRS projection information (horiztonal and vertical) from
the instruction file. Raise an error if ‘output’ is not in the instructions. If
no ‘crs’ or ‘horizontal’ or ‘vertical’ values are specified then use the default
value for each one missing from the instructions. If the default is used it is
added to the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_instruction_general">
<span class="sig-name descname"><span class="pre">get_instruction_general</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subkey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_instruction_general" title="Link to this definition"></a></dt>
<dd><p>Return the general instruction from the instruction file or return
the default value if not specified in the instruction file. Raise an
error if the key is not in the instructions and there is no default
value. If the default is used it is added to the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – </p></li>
<li><p><strong>subkey</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_processing_instructions">
<span class="sig-name descname"><span class="pre">get_processing_instructions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_processing_instructions" title="Link to this definition"></a></dt>
<dd><p>Return the processing instruction from the instruction file or
return the default value if not specified in the instruction file. If
the default is used it is added to the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – The string identifying the instruction</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.check_datasets">
<span class="sig-name descname"><span class="pre">check_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.check_datasets" title="Link to this definition"></a></dt>
<dd><p>Check to see if the dataset is included in the instructions:
key = dataservice (i.e. local, opentogaphy, linxz, lris)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The string identifying how the data is accessed
(e.g. local, opentopography, linz, etc)</p></li>
<li><p><strong>data_type</strong> (<em>str</em>) – The string identifying the data type (e.g. raster, lidar, vector)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.check_vector_or_raster">
<span class="sig-name descname"><span class="pre">check_vector_or_raster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.check_vector_or_raster" title="Link to this definition"></a></dt>
<dd><p>Check to see if vector or raster key (i.e. land, ocean_contours, etc) is
included either as a file path, or within any of API’s (i.e. LINZ or LRIS).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The string identifying the vector/raster</p></li>
<li><p><strong>api_type</strong> (<em>str</em>) – The string identifying if the key is a vector or raster</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_vector_or_raster_paths">
<span class="sig-name descname"><span class="pre">get_vector_or_raster_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_vector_or_raster_paths" title="Link to this definition"></a></dt>
<dd><p>Get the path to the vector/raster key data included either as a file path or
as an API. Return all paths where the vector key is specified. In the case that
an API is specified ensure the data is fetched as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The string identifying the vector/raster</p></li>
<li><p><strong>data_type</strong> (<em>str</em>) – The string identifying if the key is a vector or raster</p></li>
<li><p><strong>required</strong> (<em>bool</em>) – If <cite>True</cite>, an exception will be raised if no path(s) are found.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_lidar_dataset_crs">
<span class="sig-name descname"><span class="pre">get_lidar_dataset_crs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_service</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_lidar_dataset_crs" title="Link to this definition"></a></dt>
<dd><p>Checks to see if source CRS of an associated LiDAR dataset has be specified
in the instruction file. If it has been specified, this CRS is returned, and
will later be used to override the CRS encoded in the LAS files.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_lidar_datasets_info">
<span class="sig-name descname"><span class="pre">get_lidar_datasets_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_lidar_datasets_info" title="Link to this definition"></a></dt>
<dd><p>Return a dictionary with three enties ‘file_paths’, ‘crs’ and
‘tile_index_file’. The ‘file_paths’ contains a list of LiDAR tiles to
process.</p>
<p>The ‘crs’ (or coordinate system of the LiDAR data as defined by an EPSG
code) is only optionally set (if unset the value is None). The ‘crs’
should only be set if the CRS information is not correctly encoded in
this is only supported for OpenTopography LiDAR.</p>
<p>The ‘tile_index_file’ is also optional (if unset the value is None).
The ‘tile_index_file’ should be given if a tile index file exists for
the LiDAR files specifying the extents of each tile. This is currently
only supported for OpenTopography files.</p>
<p>If a LiDAR dataset (either through an API or locally) is specified this
is checked and all files within the catchment area are downloaded and
used to construct the file list. If none is specified, the instruction
‘data_paths’ is checked for ‘lidars’ and these are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.run">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.run" title="Link to this definition"></a></dt>
<dd><p>This method controls the processor execution and code-flow.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.RawLidarDemGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">RawLidarDemGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RawLidarDemGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>RawLidarDemGenerator executes a pipeline for creating a DEM from LiDAR and
optionally a coarse DEM. The data sources and pipeline logic is defined in the
json_instructions file.</p>
<dl class="simple">
<dt>The <cite>DemGenerator</cite> class contains several important class members:</dt><dd><ul class="simple">
<li><p>instructions - Defines the pipeline execution instructions</p></li>
<li><p>catchment_geometry - Defines all relevant regions in a catchment required in the
generation of a DEM as polygons.</p></li>
<li><p>raw_dem - A combination of LiDAR tiles and any referecnce DEM
from LiDAR and interpolated from bathymetry.</p></li>
<li><p>coarse_dem - This optional object defines a background DEM that may be used to
fill on land gaps in the LiDAR.</p></li>
</ul>
</dd>
</dl>
<p>See the README.md for usage examples or GeoFabrics/tests/ for examples of usage and
an instruction file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_instructions</strong> (<em>json</em>) – </p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RawLidarDemGenerator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RawLidarDemGenerator.run" title="Link to this definition"></a></dt>
<dd><p>This method executes the geofabrics generation pipeline to produce geofabric
derivatives.</p>
<p>Note it currently only considers one LiDAR dataset that can have many tiles.
See ‘get_lidar_datasets_info’ for where to change this.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.HydrologicDemGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">HydrologicDemGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.HydrologicDemGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>HydrologicDemGenerator executes a pipeline for loading in a raw DEM and extents
before incorporating bathymetry (offshore, rivers and waterways) to produce a
hydrologically conditioned DEM. The data and pipeline logic is defined in
the json_instructions file.</p>
<dl class="simple">
<dt>The <cite>HydrologicDemGenerator</cite> class contains several important class members:</dt><dd><ul class="simple">
<li><p>catchment_geometry - Defines all relevant regions in a catchment required in the
generation of a DEM as polygons.</p></li>
<li><p>hydrologic_dem - Defines the hydrologically conditioned DEM as a combination of
tiles from LiDAR and interpolated from bathymetry.</p></li>
<li><p>bathy_contours - This object defines the bathymetry vectors used to define the
DEM values offshore.</p></li>
</ul>
</dd>
</dl>
<p>See the README.md for usage examples or GeoFabrics/tests/ for examples of usage and
an instruction file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_instructions</strong> (<em>json</em>) – </p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.HydrologicDemGenerator.add_bathymetry">
<span class="sig-name descname"><span class="pre">add_bathymetry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">area_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catchment_dirs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.HydrologicDemGenerator.add_bathymetry" title="Link to this definition"></a></dt>
<dd><p>Add in any bathymetry data - ocean or river</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>area_threshold</strong> (<em>float</em>) – </p></li>
<li><p><strong>catchment_dirs</strong> (<em>pathlib.Path</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.HydrologicDemGenerator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.HydrologicDemGenerator.run" title="Link to this definition"></a></dt>
<dd><p>This method executes the geofabrics generation pipeline to produce geofabric
derivatives.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.RoughnessLengthGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">RoughnessLengthGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RoughnessLengthGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>RoughnessLengthGenerator executes a pipeline for loading in a hydrologically
conditioned DEM and LiDAR tiles to produce a roughness length layer that is added to
the Hydrologically conditioned DEM. The data and pipeline logic is defined in
the json_instructions file.</p>
<dl class="simple">
<dt>The <cite>RoughnessLengthGenerator</cite> class contains several important class members:</dt><dd><ul class="simple">
<li><p>catchment_geometry - Defines all relevant regions in a catchment required in the
generation of a DEM as polygons.</p></li>
<li><p>roughness_dem - Adds a roughness layer to the hydrologically conditioned DEM.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_instructions</strong> (<em>json</em>) – </p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RoughnessLengthGenerator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RoughnessLengthGenerator.run" title="Link to this definition"></a></dt>
<dd><p>This method executes the geofabrics generation pipeline to produce geofabric
derivatives.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.MeasuredRiverGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">MeasuredRiverGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.MeasuredRiverGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>MeasuredRiverGenerator executes a pipeline to interpolate between
measured river cross section elevations. A json_instructions file defines
the pipeline logic and data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_instructions</strong> (<em>json</em>) – </p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.MeasuredRiverGenerator.get_measured_instruction">
<span class="sig-name descname"><span class="pre">get_measured_instruction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.MeasuredRiverGenerator.get_measured_instruction" title="Link to this definition"></a></dt>
<dd><p>Return true if the DEMs are required for later processing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>behaviour</strong> (<em>instructions  The json instructions defining the</em>) – </p></li>
<li><p><strong>key</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.MeasuredRiverGenerator.estimate_river_mouth_fan">
<span class="sig-name descname"><span class="pre">estimate_river_mouth_fan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">defaults</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.MeasuredRiverGenerator.estimate_river_mouth_fan" title="Link to this definition"></a></dt>
<dd><p>Calculate and save depth estimates along the river mouth fan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>defaults</strong> (<em>dict</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.MeasuredRiverGenerator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.MeasuredRiverGenerator.run" title="Link to this definition"></a></dt>
<dd><p>This method extracts a main channel then executes the DemGeneration
pipeline to produce a DEM before sampling this to extimate width, slope
and eventually depth.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">RiverBathymetryGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>RiverbathymetryGenerator executes a pipeline to estimate river
bathymetry depths from flows, slopes, friction and widths along a main
channel. This is dones by first creating a hydrologically conditioned DEM
of the channel. A json_instructions file defines the pipeline logic and
data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_instructions</strong> (<em>json</em>) – </p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">channel_polyline</span>&#160; <span class="pre">The</span> <span class="pre">main</span> <span class="pre">channel</span> <span class="pre">along</span> <span class="pre">which</span> <span class="pre">to</span> <span class="pre">estimate</span> <span class="pre">depth.</span> <span class="pre">This</span></span></dt>
<dd><p>is a polyline.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">gen_dem</span>&#160; <span class="pre">The</span> <span class="pre">ground</span> <span class="pre">DEM</span> <span class="pre">generated</span> <span class="pre">along</span> <span class="pre">the</span> <span class="pre">main</span> <span class="pre">channel.</span> <span class="pre">This</span> <span class="pre">is</span> <span class="pre">a</span></span></dt>
<dd><p>raster.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">veg_dem</span>&#160; <span class="pre">The</span> <span class="pre">vegetation</span> <span class="pre">DEM</span> <span class="pre">generated</span> <span class="pre">along</span> <span class="pre">the</span> <span class="pre">main</span> <span class="pre">channel.</span> <span class="pre">This</span> <span class="pre">is</span> <span class="pre">a</span></span></dt>
<dd><p>raster.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">aligned_channel_polyline</span>&#160; <span class="pre">The</span> <span class="pre">main</span> <span class="pre">channel</span> <span class="pre">after</span> <span class="pre">its</span> <span class="pre">alignment</span> <span class="pre">has</span> <span class="pre">been</span></span></dt>
<dd><p>updated based on the DEM. Width and slope are estimated on this.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">transects</span>&#160; <span class="pre">Transect</span> <span class="pre">polylines</span> <span class="pre">perpindicular</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">aligned</span> <span class="pre">channel</span> <span class="pre">with</span></span></dt>
<dd><p>samples of the DEM values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.channel_characteristics_exist">
<span class="sig-name descname"><span class="pre">channel_characteristics_exist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.channel_characteristics_exist" title="Link to this definition"></a></dt>
<dd><p>Return true if the DEMs are required for later processing</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.channel_bathymetry_exist">
<span class="sig-name descname"><span class="pre">channel_bathymetry_exist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.channel_bathymetry_exist" title="Link to this definition"></a></dt>
<dd><p>Return true if the river channel and bathymetry files exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.alignment_exists">
<span class="sig-name descname"><span class="pre">alignment_exists</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.alignment_exists" title="Link to this definition"></a></dt>
<dd><p>Return true if the DEMs are required for later processing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>behaviour</strong> (<em>instructions  The json instructions defining the</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.get_result_file_name">
<span class="sig-name descname"><span class="pre">get_result_file_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.get_result_file_name" title="Link to this definition"></a></dt>
<dd><p>Return the file name of the file to save.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>behaviour</strong> (<em>instructions  The json instructions defining the</em>) – </p></li>
<li><p><strong>key</strong> (<em>str</em>) – </p></li>
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.get_result_file_path">
<span class="sig-name descname"><span class="pre">get_result_file_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.get_result_file_path" title="Link to this definition"></a></dt>
<dd><p>Return the file name of the file to save with the local cache path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>behaviour</strong> (<em>instructions  The json instructions defining the</em>) – </p></li>
<li><p><strong>key</strong> (<em>str</em>) – </p></li>
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pathlib.Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.get_bathymetry_instruction">
<span class="sig-name descname"><span class="pre">get_bathymetry_instruction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.get_bathymetry_instruction" title="Link to this definition"></a></dt>
<dd><p>Return true if the DEMs are required for later processing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>behaviour</strong> (<em>instructions  The json instructions defining the</em>) – </p></li>
<li><p><strong>key</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.get_network_channel">
<span class="sig-name descname"><span class="pre">get_network_channel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.get_network_channel" title="Link to this definition"></a></dt>
<dd><p>Read in or create a channel from a river network.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../bathymetry_estimation/index.html#geofabrics.bathymetry_estimation.Channel" title="geofabrics.bathymetry_estimation.Channel">geofabrics.bathymetry_estimation.Channel</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.get_dems">
<span class="sig-name descname"><span class="pre">get_dems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.get_dems" title="Link to this definition"></a></dt>
<dd><p>Allow selection of the ground or vegetation DEM, and either create
or load it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>behaviour</strong> (<em>instructions  The json instructions defining the</em>) – </p></li>
<li><p><strong>channel</strong> (<a class="reference internal" href="../geometry/index.html#geofabrics.geometry.CatchmentGeometry" title="geofabrics.geometry.CatchmentGeometry"><em>geofabrics.geometry.CatchmentGeometry</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.align_channel">
<span class="sig-name descname"><span class="pre">align_channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.align_channel" title="Link to this definition"></a></dt>
<dd><p>Align the river network defined channel based on LiDAR and save the aligned
channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<em>channel_width  The class for characterising channel width and</em>) – properties</p></li>
<li><p><strong>alignment</strong> (<em>channel  The river network defined channel</em>) – </p></li>
<li><p><strong>channel_width</strong> (<a class="reference internal" href="../bathymetry_estimation/index.html#geofabrics.bathymetry_estimation.ChannelCharacteristics" title="geofabrics.bathymetry_estimation.ChannelCharacteristics"><em>geofabrics.bathymetry_estimation.ChannelCharacteristics</em></a>) – </p></li>
<li><p><strong>channel</strong> (<a class="reference internal" href="../bathymetry_estimation/index.html#geofabrics.bathymetry_estimation.Channel" title="geofabrics.bathymetry_estimation.Channel"><em>geofabrics.bathymetry_estimation.Channel</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>geopandas.GeoDataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.calculate_channel_characteristics">
<span class="sig-name descname"><span class="pre">calculate_channel_characteristics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aligned_channel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.calculate_channel_characteristics" title="Link to this definition"></a></dt>
<dd><p>Align the river network defined channel based on LiDAR and save the aligned
channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<em>channel_width  The class for characterising channel width and</em>) – properties</p></li>
<li><p><strong>alignment</strong> (<em>channel  The river network defined channel</em>) – </p></li>
<li><p><strong>channel_width</strong> (<a class="reference internal" href="../bathymetry_estimation/index.html#geofabrics.bathymetry_estimation.ChannelCharacteristics" title="geofabrics.bathymetry_estimation.ChannelCharacteristics"><em>geofabrics.bathymetry_estimation.ChannelCharacteristics</em></a>) – </p></li>
<li><p><strong>aligned_channel</strong> (<em>geopandas.GeoDataFrame</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.characterise_channel">
<span class="sig-name descname"><span class="pre">characterise_channel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.characterise_channel" title="Link to this definition"></a></dt>
<dd><p>Calculate the channel width, slope and other characteristics. This requires a
ground and vegetation DEM. This also may require alignment of the channel
centreline.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.align_channel_from_rec">
<span class="sig-name descname"><span class="pre">align_channel_from_rec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.align_channel_from_rec" title="Link to this definition"></a></dt>
<dd><p>Calculate the channel width, slope and other characteristics. This requires a
ground and vegetation DEM. This also may require alignment of the channel
centreline.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.align_channel_from_osm">
<span class="sig-name descname"><span class="pre">align_channel_from_osm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.align_channel_from_osm" title="Link to this definition"></a></dt>
<dd><p>Calculate the channel width, slope and other characteristics. This requires a
ground and vegetation DEM. This also may require alignment of the channel
centreline.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../bathymetry_estimation/index.html#geofabrics.bathymetry_estimation.ChannelCharacteristics" title="geofabrics.bathymetry_estimation.ChannelCharacteristics">geofabrics.bathymetry_estimation.ChannelCharacteristics</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.calculate_river_bed_elevations">
<span class="sig-name descname"><span class="pre">calculate_river_bed_elevations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.calculate_river_bed_elevations" title="Link to this definition"></a></dt>
<dd><p>Calculate and save depth estimates along the channel using various
approaches.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.estimate_river_mouth_fan">
<span class="sig-name descname"><span class="pre">estimate_river_mouth_fan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.estimate_river_mouth_fan" title="Link to this definition"></a></dt>
<dd><p>Calculate and save depth estimates along the river mouth fan.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.RiverBathymetryGenerator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.RiverBathymetryGenerator.run" title="Link to this definition"></a></dt>
<dd><p>This method extracts a main channel then executes the DemGeneration
pipeline to produce a DEM before sampling this to extimate width, slope
and eventually depth.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">WaterwayBedElevationEstimator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>WaterwayBedElevationGenerator executes a pipeline to pull in OpenStreetMap waterway
and tunnel information. A DEM is generated of the surrounding area and this used to
unblock waterways and tunnels - by taking the lowest value in the area around a tunnel
to be the tunnel elevation, and ensuring opne waterways flow downhill.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_instructions</strong> (<em>json</em>) – </p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.get_result_file_name">
<span class="sig-name descname"><span class="pre">get_result_file_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.get_result_file_name" title="Link to this definition"></a></dt>
<dd><p>Return the name of the file to save.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.get_result_file_path">
<span class="sig-name descname"><span class="pre">get_result_file_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.get_result_file_path" title="Link to this definition"></a></dt>
<dd><p>Return the file name of the file to save with the local cache path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>behaviour</strong> (<em>instructions  The json instructions defining the</em>) – </p></li>
<li><p><strong>key</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pathlib.Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.waterway_elevations_exists">
<span class="sig-name descname"><span class="pre">waterway_elevations_exists</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.waterway_elevations_exists" title="Link to this definition"></a></dt>
<dd><p>Check to see if the waterway and culvert bathymeties have already been
estimated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.minimum_elevation_in_polygon">
<span class="sig-name descname"><span class="pre">minimum_elevation_in_polygon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dem</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.minimum_elevation_in_polygon" title="Link to this definition"></a></dt>
<dd><p>Determine the minimum value in each polygon. Select only coordinates
within the polygon bounding box before clipping to the bounding box and
then returning the minimum elevation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometry</strong> (<em>shapely.geometry.Polygon</em>) – </p></li>
<li><p><strong>dem</strong> (<em>xarray.Dataset</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.estimate_closed_elevations">
<span class="sig-name descname"><span class="pre">estimate_closed_elevations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">waterways</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dem</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.estimate_closed_elevations" title="Link to this definition"></a></dt>
<dd><p>Sample the DEM around the tunnels to estimate the bed elevation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>waterways</strong> (<em>geopandas.GeoDataFrame</em>) – </p></li>
<li><p><strong>dem</strong> (<em>xarray.Dataset</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.estimate_open_elevations">
<span class="sig-name descname"><span class="pre">estimate_open_elevations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">waterways</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dem</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.estimate_open_elevations" title="Link to this definition"></a></dt>
<dd><p>Sample the DEM along the open waterways to enforce a decreasing elevation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>waterways</strong> (<em>geopandas.GeoDataFrame</em>) – </p></li>
<li><p><strong>dem</strong> (<em>xarray.Dataset</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.create_dem">
<span class="sig-name descname"><span class="pre">create_dem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">waterways</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.create_dem" title="Link to this definition"></a></dt>
<dd><p>Create and return a DEM at a resolution 1.5x the waterway width.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>waterways</strong> (<em>geopandas.GeoDataFrame</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>xarray.Dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.download_osm_values">
<span class="sig-name descname"><span class="pre">download_osm_values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.download_osm_values" title="Link to this definition"></a></dt>
<dd><p>Download OpenStreetMap waterways and tunnels within the catchment BBox.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.WaterwayBedElevationEstimator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.WaterwayBedElevationEstimator.run" title="Link to this definition"></a></dt>
<dd><p>This method runs a pipeline that:
* downloads all tunnels and waterways within a catchment.
* creates and samples a DEM around each feature to estimate the bed</p>
<blockquote>
<div><p>elevation.</p>
</div></blockquote>
<ul class="simple">
<li><p>saves out extents and bed elevations of the waterway and tunnel network</p></li>
</ul>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../geometry/index.html" class="btn btn-neutral float-left" title="geofabrics.geometry" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../runner/index.html" class="btn btn-neutral float-right" title="geofabrics.runner" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Rose Pearson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>